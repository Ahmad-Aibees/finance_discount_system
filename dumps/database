--
-- PostgreSQL database dump
--

-- Dumped from database version 13.2
-- Dumped by pg_dump version 13.2

-- Started on 2021-04-10 16:00:03

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 6 (class 2615 OID 16430)
-- Name: ahmad; Type: SCHEMA; Schema: -; Owner: ahmad
--

CREATE SCHEMA ahmad;


ALTER SCHEMA ahmad OWNER TO ahmad;

--
-- TOC entry 650 (class 1247 OID 16577)
-- Name: discount_reference_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.discount_reference_type AS ENUM (
    'PRODUCT',
    'CATEGORY'
);


ALTER TYPE public.discount_reference_type OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 210 (class 1259 OID 16636)
-- Name: category; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.category (
    id integer NOT NULL,
    name character varying(50) NOT NULL,
    parent_category_id integer,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    discount_id integer
);


ALTER TABLE public.category OWNER TO postgres;

--
-- TOC entry 209 (class 1259 OID 16634)
-- Name: category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.category_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.category_id_seq OWNER TO postgres;

--
-- TOC entry 3089 (class 0 OID 0)
-- Dependencies: 209
-- Name: category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.category_id_seq OWNED BY public.category.id;


--
-- TOC entry 206 (class 1259 OID 16557)
-- Name: company; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.company (
    id integer NOT NULL,
    name character varying NOT NULL,
    username character varying(50) NOT NULL,
    password character varying(255) NOT NULL,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.company OWNER TO postgres;

--
-- TOC entry 205 (class 1259 OID 16555)
-- Name: company_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.company_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.company_id_seq OWNER TO postgres;

--
-- TOC entry 3090 (class 0 OID 0)
-- Dependencies: 205
-- Name: company_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.company_id_seq OWNED BY public.company.id;


--
-- TOC entry 204 (class 1259 OID 16524)
-- Name: customer; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.customer (
    id integer NOT NULL,
    mobile character varying(13) NOT NULL,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.customer OWNER TO postgres;

--
-- TOC entry 203 (class 1259 OID 16522)
-- Name: customer_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.customer_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.customer_id_seq OWNER TO postgres;

--
-- TOC entry 3091 (class 0 OID 0)
-- Dependencies: 203
-- Name: customer_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.customer_id_seq OWNED BY public.customer.id;


--
-- TOC entry 208 (class 1259 OID 16620)
-- Name: discount; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.discount (
    id integer NOT NULL,
    discount_percent integer NOT NULL,
    due_date integer NOT NULL,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.discount OWNER TO postgres;

--
-- TOC entry 214 (class 1259 OID 16688)
-- Name: discount_code; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.discount_code (
    id integer NOT NULL,
    discount_code character varying(50) NOT NULL,
    discount_percent integer,
    expiration_date integer NOT NULL,
    min_amount integer,
    company_id integer,
    reference_id integer NOT NULL,
    reference_type public.discount_reference_type NOT NULL,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    customer_id integer
);


ALTER TABLE public.discount_code OWNER TO postgres;

--
-- TOC entry 213 (class 1259 OID 16686)
-- Name: discount_code_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.discount_code_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.discount_code_id_seq OWNER TO postgres;

--
-- TOC entry 3092 (class 0 OID 0)
-- Dependencies: 213
-- Name: discount_code_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.discount_code_id_seq OWNED BY public.discount_code.id;


--
-- TOC entry 207 (class 1259 OID 16618)
-- Name: discount_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.discount_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.discount_id_seq OWNER TO postgres;

--
-- TOC entry 3093 (class 0 OID 0)
-- Dependencies: 207
-- Name: discount_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.discount_id_seq OWNED BY public.discount.id;


--
-- TOC entry 202 (class 1259 OID 16471)
-- Name: employee; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.employee (
    id integer NOT NULL,
    firstname character varying(50) NOT NULL,
    lastname character varying(50) NOT NULL,
    email character varying(50) NOT NULL,
    password character varying(255) NOT NULL,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.employee OWNER TO postgres;

--
-- TOC entry 201 (class 1259 OID 16469)
-- Name: employee_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.employee_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.employee_id_seq OWNER TO postgres;

--
-- TOC entry 3094 (class 0 OID 0)
-- Dependencies: 201
-- Name: employee_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.employee_id_seq OWNED BY public.employee.id;


--
-- TOC entry 212 (class 1259 OID 16657)
-- Name: product; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.product (
    id integer NOT NULL,
    name character varying(50) NOT NULL,
    category_id integer,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    discount_id integer
);


ALTER TABLE public.product OWNER TO postgres;

--
-- TOC entry 211 (class 1259 OID 16655)
-- Name: product_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.product_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.product_id_seq OWNER TO postgres;

--
-- TOC entry 3095 (class 0 OID 0)
-- Dependencies: 211
-- Name: product_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.product_id_seq OWNED BY public.product.id;


--
-- TOC entry 2899 (class 2604 OID 16639)
-- Name: category id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category ALTER COLUMN id SET DEFAULT nextval('public.category_id_seq'::regclass);


--
-- TOC entry 2895 (class 2604 OID 16560)
-- Name: company id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company ALTER COLUMN id SET DEFAULT nextval('public.company_id_seq'::regclass);


--
-- TOC entry 2893 (class 2604 OID 16527)
-- Name: customer id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.customer ALTER COLUMN id SET DEFAULT nextval('public.customer_id_seq'::regclass);


--
-- TOC entry 2897 (class 2604 OID 16623)
-- Name: discount id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount ALTER COLUMN id SET DEFAULT nextval('public.discount_id_seq'::regclass);


--
-- TOC entry 2903 (class 2604 OID 16691)
-- Name: discount_code id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount_code ALTER COLUMN id SET DEFAULT nextval('public.discount_code_id_seq'::regclass);


--
-- TOC entry 2891 (class 2604 OID 16474)
-- Name: employee id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee ALTER COLUMN id SET DEFAULT nextval('public.employee_id_seq'::regclass);


--
-- TOC entry 2901 (class 2604 OID 16660)
-- Name: product id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.product ALTER COLUMN id SET DEFAULT nextval('public.product_id_seq'::regclass);


--
-- TOC entry 3078 (class 0 OID 16636)
-- Dependencies: 210
-- Data for Name: category; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.category (id, name, parent_category_id, date, discount_id) FROM stdin;
19	c3	18	2021-04-10 11:18:02.004031	\N
20	c4	19	2021-04-10 11:18:02.004031	\N
21	c5	20	2021-04-10 11:18:02.004031	\N
23	c7	18	2021-04-10 11:18:02.004031	7
22	c6	19	2021-04-10 11:18:02.004031	9
17	c1	23	2021-04-10 11:18:02.004031	10
18	c2	17	2021-04-10 11:18:02.004031	8
29	c8	30	2021-04-10 14:17:35.023304	\N
30	c9	31	2021-04-10 14:17:35.023304	\N
32	c11	30	2021-04-10 14:17:35.023304	\N
31	c10	29	2021-04-10 14:17:35.023304	\N
\.


--
-- TOC entry 3074 (class 0 OID 16557)
-- Dependencies: 206
-- Data for Name: company; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.company (id, name, username, password, date) FROM stdin;
1	company1	company1	$2a$10$eUyz3tub2XdICzWyzK7PwuLNuB0.mZ6jNWfRl1z9yVBMsU66TJ5vK	2021-04-10 03:07:34.266844
\.


--
-- TOC entry 3072 (class 0 OID 16524)
-- Dependencies: 204
-- Data for Name: customer; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.customer (id, mobile, date) FROM stdin;
1	+989381434789	2021-04-10 15:25:40.447738
\.


--
-- TOC entry 3076 (class 0 OID 16620)
-- Dependencies: 208
-- Data for Name: discount; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.discount (id, discount_percent, due_date, date) FROM stdin;
5	20	1617933416	2021-04-10 11:34:23.595581
6	15	1618451816	2021-04-10 11:34:23.595581
7	17	1618883816	2021-04-10 11:34:23.595581
9	14	1618970216	2021-04-10 11:34:23.595581
10	3	1619747816	2021-04-10 11:34:23.595581
8	36	1618113563	2021-04-10 11:34:23.595581
\.


--
-- TOC entry 3082 (class 0 OID 16688)
-- Dependencies: 214
-- Data for Name: discount_code; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.discount_code (id, discount_code, discount_percent, expiration_date, min_amount, company_id, reference_id, reference_type, date, customer_id) FROM stdin;
1	product1Discount	30	1618372763	50	1	1	PRODUCT	2021-04-10 15:08:40.40346	\N
2	category6Discount	40	1618372763	100	\N	22	CATEGORY	2021-04-10 15:09:56.832526	\N
\.


--
-- TOC entry 3070 (class 0 OID 16471)
-- Dependencies: 202
-- Data for Name: employee; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.employee (id, firstname, lastname, email, password, date) FROM stdin;
1	ahmad	sandouk	ahmad.sandouk.16@gmail.com	$2a$10$eUyz3tub2XdICzWyzK7PwuLNuB0.mZ6jNWfRl1z9yVBMsU66TJ5vK	2021-04-09 18:11:55.271653
\.


--
-- TOC entry 3080 (class 0 OID 16657)
-- Dependencies: 212
-- Data for Name: product; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.product (id, name, category_id, date, discount_id) FROM stdin;
1	p1	17	2021-04-10 11:39:09.607371	5
2	p2	20	2021-04-10 11:39:09.607371	\N
3	p3	21	2021-04-10 11:39:09.607371	\N
4	p4	22	2021-04-10 11:39:09.607371	10
5	p5	19	2021-04-10 11:39:09.607371	\N
6	p6	23	2021-04-10 11:39:09.607371	8
10	p9	\N	2021-04-10 14:17:35.023304	\N
11	p8	31	2021-04-10 14:17:35.023304	\N
12	p7	30	2021-04-10 14:17:35.023304	\N
\.


--
-- TOC entry 3096 (class 0 OID 0)
-- Dependencies: 209
-- Name: category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.category_id_seq', 32, true);


--
-- TOC entry 3097 (class 0 OID 0)
-- Dependencies: 205
-- Name: company_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.company_id_seq', 1, true);


--
-- TOC entry 3098 (class 0 OID 0)
-- Dependencies: 203
-- Name: customer_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.customer_id_seq', 1, true);


--
-- TOC entry 3099 (class 0 OID 0)
-- Dependencies: 213
-- Name: discount_code_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.discount_code_id_seq', 2, true);


--
-- TOC entry 3100 (class 0 OID 0)
-- Dependencies: 207
-- Name: discount_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.discount_id_seq', 10, true);


--
-- TOC entry 3101 (class 0 OID 0)
-- Dependencies: 201
-- Name: employee_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.employee_id_seq', 1, true);


--
-- TOC entry 3102 (class 0 OID 0)
-- Dependencies: 211
-- Name: product_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.product_id_seq', 12, true);


--
-- TOC entry 2922 (class 2606 OID 16644)
-- Name: category category_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_name_key UNIQUE (name);


--
-- TOC entry 2924 (class 2606 OID 16642)
-- Name: category category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_pkey PRIMARY KEY (id);


--
-- TOC entry 2914 (class 2606 OID 16568)
-- Name: company company_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company
    ADD CONSTRAINT company_name_key UNIQUE (name);


--
-- TOC entry 2916 (class 2606 OID 16566)
-- Name: company company_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company
    ADD CONSTRAINT company_pkey PRIMARY KEY (id);


--
-- TOC entry 2918 (class 2606 OID 16570)
-- Name: company company_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company
    ADD CONSTRAINT company_username_key UNIQUE (username);


--
-- TOC entry 2910 (class 2606 OID 16532)
-- Name: customer customer_mobile_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.customer
    ADD CONSTRAINT customer_mobile_key UNIQUE (mobile);


--
-- TOC entry 2912 (class 2606 OID 16530)
-- Name: customer customer_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.customer
    ADD CONSTRAINT customer_pkey PRIMARY KEY (id);


--
-- TOC entry 2930 (class 2606 OID 16696)
-- Name: discount_code discount_code_discountcode_referencetype_referenceid_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount_code
    ADD CONSTRAINT discount_code_discountcode_referencetype_referenceid_key UNIQUE (discount_code, reference_type, reference_id);


--
-- TOC entry 2932 (class 2606 OID 16694)
-- Name: discount_code discount_code_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount_code
    ADD CONSTRAINT discount_code_pkey PRIMARY KEY (id);


--
-- TOC entry 2920 (class 2606 OID 16626)
-- Name: discount discount_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount
    ADD CONSTRAINT discount_pkey PRIMARY KEY (id);


--
-- TOC entry 2906 (class 2606 OID 16479)
-- Name: employee employee_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee
    ADD CONSTRAINT employee_email_key UNIQUE (email);


--
-- TOC entry 2908 (class 2606 OID 16477)
-- Name: employee employee_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee
    ADD CONSTRAINT employee_pkey PRIMARY KEY (id);


--
-- TOC entry 2926 (class 2606 OID 16665)
-- Name: product product_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.product
    ADD CONSTRAINT product_name_key UNIQUE (name);


--
-- TOC entry 2928 (class 2606 OID 16663)
-- Name: product product_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.product
    ADD CONSTRAINT product_pkey PRIMARY KEY (id);


--
-- TOC entry 2934 (class 2606 OID 16676)
-- Name: category category_discountid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_discountid_fkey FOREIGN KEY (discount_id) REFERENCES public.discount(id) ON UPDATE CASCADE ON DELETE SET DEFAULT;


--
-- TOC entry 2933 (class 2606 OID 16645)
-- Name: category category_parentcategoryid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_parentcategoryid_fkey FOREIGN KEY (parent_category_id) REFERENCES public.category(id) ON UPDATE CASCADE ON DELETE SET NULL;


--
-- TOC entry 2937 (class 2606 OID 16697)
-- Name: discount_code discount_code_companyid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount_code
    ADD CONSTRAINT discount_code_companyid_fkey FOREIGN KEY (company_id) REFERENCES public.company(id) ON UPDATE CASCADE ON DELETE RESTRICT;


--
-- TOC entry 2938 (class 2606 OID 16707)
-- Name: discount_code discount_code_customer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount_code
    ADD CONSTRAINT discount_code_customer_id_fkey FOREIGN KEY (customer_id) REFERENCES public.customer(id) ON UPDATE CASCADE ON DELETE RESTRICT;


--
-- TOC entry 2935 (class 2606 OID 16666)
-- Name: product product_categoryid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.product
    ADD CONSTRAINT product_categoryid_fkey FOREIGN KEY (category_id) REFERENCES public.category(id) ON UPDATE CASCADE ON DELETE SET NULL;


--
-- TOC entry 2936 (class 2606 OID 16681)
-- Name: product product_discountid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.product
    ADD CONSTRAINT product_discountid_fkey FOREIGN KEY (discount_id) REFERENCES public.discount(id) ON UPDATE CASCADE ON DELETE SET DEFAULT;


--
-- TOC entry 3088 (class 0 OID 0)
-- Dependencies: 6
-- Name: SCHEMA ahmad; Type: ACL; Schema: -; Owner: ahmad
--

GRANT USAGE ON SCHEMA ahmad TO PUBLIC;


-- Completed on 2021-04-10 16:00:04

--
-- PostgreSQL database dump complete
--

